"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.debouncePromise = debouncePromise;
exports.DebounceError = void 0;
var promises = {};
var DebounceError = new Error('DebounceError');
exports.DebounceError = DebounceError;

function debouncePromise(key, fn) {
  var delay = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 500;
  var promise = new Promise(function (resolve, reject) {
    setTimeout(function () {
      return promises[key] === promise ? new Promise(fn).then(resolve)["catch"](reject) : reject(DebounceError);
    }, delay);
  });
  return promises[key] = promise;
}